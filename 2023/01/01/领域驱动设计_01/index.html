<!DOCTYPE html>
<html lang="zh-CN">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="ä¸€ã€é¢†åŸŸé©±åŠ¨è®¾è®¡-ç†è®ºç¯‡" />
    <meta name="hexo-theme-A4" content="v1.9.7" />
    <link rel="alternate icon" type="image/webp" href="/img/avatar.png">
    <title>Ethan-é€é“æ—¥è®° | true</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


   
        
<link rel="stylesheet" href="/css/custom.css">

    

<meta name="generator" content="Hexo 7.3.0"></head>
    
    
        <style>
            .index-main{
                max-width:  1200px;
            }
        </style>

    
    



    

    
    




    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: 'ğŸŒ“', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    

    <div class="index-header-line" >
        <div id="hiddenHeaderContentArray" style="display: none;">
            
            
            
                <span>The only way to achieve the impossible is to believe it is possible.</span>
            
        </div>
        <span id="targetSpan"></span>
    </div>


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
                transition: transform 0.3s ease-in-out; 
                border-radius: 0; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/img/avatar.png" 
        />
        <div class="header-content">
            <a class="logo" href="/">Ethan-é€é“æ—¥è®°</a> 
            <span class="description">é€æœ‰é“æ— æœ¯ä¹‹é“</span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/tags/">æ ‡ç­¾</a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    ä¸€ã€é¢†åŸŸé©±åŠ¨è®¾è®¡-ç†è®ºç¯‡
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>æœ€è¿‘æ›´æ–°ï¼š2025-02-26</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>å­—æ•°æ€»è®¡ï¼š4.1k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š16åˆ†é’Ÿ</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
        
        <div class=".article-gallery"><h1 id="1-DDD-åŸºç¡€æ¦‚å¿µ"><a href="#1-DDD-åŸºç¡€æ¦‚å¿µ" class="headerlink" title="1. DDD åŸºç¡€æ¦‚å¿µ"></a>1. DDD åŸºç¡€æ¦‚å¿µ</h1><p>é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDomain-Driven Design, DDDï¼‰æ˜¯ç”±Eric Evansåœ¨å…¶ä¹¦ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹ä¸­æå‡ºçš„ä¸€ç§è½¯ä»¶è®¾è®¡ç†å¿µï¼Œæ—¨åœ¨é€šè¿‡å¯¹ä¸šåŠ¡é¢†åŸŸçš„æ·±å…¥ç†è§£æ¥æ„å»ºå¤æ‚çš„ä¸šåŠ¡ç³»ç»Ÿã€‚DDDå¼ºè°ƒå°†æŠ€æœ¯æ¶æ„ä¸ä¸šåŠ¡éœ€æ±‚ç´§å¯†ç»“åˆï¼Œä»è€Œæœ‰æ•ˆåœ°åº”å¯¹å¤æ‚æ€§ã€‚</p>
<h2 id="1-1-é¢†åŸŸï¼ˆDomainï¼‰"><a href="#1-1-é¢†åŸŸï¼ˆDomainï¼‰" class="headerlink" title="1.1 é¢†åŸŸï¼ˆDomainï¼‰"></a>1.1 é¢†åŸŸï¼ˆDomainï¼‰</h2><p>é¢†åŸŸæ˜¯æŒ‡ç³»ç»Ÿæ‰€æ¶‰åŠçš„ä¸šåŠ¡é¢†åŸŸæˆ–é—®é¢˜ç©ºé—´ã€‚å®ƒæè¿°äº†ç³»ç»Ÿæ‰€æœåŠ¡çš„ä¸šåŠ¡çš„å„ç§äº‹ç‰©å’Œè§„åˆ™ã€‚ç†è§£é¢†åŸŸæ˜¯DDDçš„æ ¸å¿ƒï¼Œå› ä¸ºåªæœ‰æ·±å…¥äº†è§£ä¸šåŠ¡é¢†åŸŸï¼Œæ‰èƒ½è®¾è®¡å‡ºç¬¦åˆå®é™…éœ€æ±‚çš„ç³»ç»Ÿã€‚</p>
<h3 id="é¢†åŸŸçš„ç‰¹ç‚¹ï¼š"><a href="#é¢†åŸŸçš„ç‰¹ç‚¹ï¼š" class="headerlink" title="é¢†åŸŸçš„ç‰¹ç‚¹ï¼š"></a>é¢†åŸŸçš„ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>ä¸šåŠ¡é—®é¢˜</strong>ï¼šé¢†åŸŸæ¶‰åŠçš„é€šå¸¸æ˜¯å®é™…çš„ä¸šåŠ¡é—®é¢˜ï¼Œæ¯”å¦‚é‡‘èã€åŒ»ç–—ã€é›¶å”®ç­‰ã€‚</li>
<li><strong>é¢†åŸŸä¸“å®¶</strong>ï¼šé¢†åŸŸä¸“å®¶æ˜¯å¯¹é¢†åŸŸæœ‰æ·±åˆ»ç†è§£çš„äººï¼Œä»–ä»¬çš„ç»éªŒå’ŒçŸ¥è¯†å¯¹äºè®¾è®¡ç³»ç»Ÿè‡³å…³é‡è¦ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•†å“é¢†åŸŸ</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String productId;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> price;  <span class="comment">// å•†å“ä»·æ ¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getProductId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> productId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢å•é¡¹é¢†åŸŸ</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderItem</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Product product;  <span class="comment">// å•†å“</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> quantity;  <span class="comment">// å•†å“æ•°é‡</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTotalPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> product.getPrice() * quantity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Product <span class="title function_">getProduct</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> product;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getQuantity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> quantity;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢å•é¢†åŸŸ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String orderId;</span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderItem&gt; items;  <span class="comment">// è®¢å•ä¸­çš„å•†å“é¡¹</span></span><br><span class="line">    <span class="keyword">private</span> String status;  <span class="comment">// è®¢å•çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> totalPrice;  <span class="comment">// è®¢å•æ€»ä»·</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(OrderItem item)</span> &#123;</span><br><span class="line">        items.add(item);</span><br><span class="line">        <span class="built_in">this</span>.totalPrice = calculateTotalPrice();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> <span class="title function_">calculateTotalPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.stream().mapToDouble(OrderItem::getTotalPrice).sum();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;æœªæ”¯ä»˜&quot;</span>.equals(status)) &#123;</span><br><span class="line">            status = <span class="string">&quot;å·²æ”¯ä»˜&quot;</span>;  <span class="comment">// æ”¯ä»˜æ“ä½œ</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²æ”¯ä»˜æˆ–æ— æ•ˆ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTotalPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> totalPrice;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="1-2-å­åŸŸï¼ˆSubdomainï¼‰"><a href="#1-2-å­åŸŸï¼ˆSubdomainï¼‰" class="headerlink" title="1.2 å­åŸŸï¼ˆSubdomainï¼‰"></a>1.2 å­åŸŸï¼ˆSubdomainï¼‰</h2><p>ä¸€ä¸ªå¤§å‹çš„ç³»ç»Ÿå¾€å¾€ä¼šæ¶‰åŠå¤šä¸ªé¢†åŸŸï¼Œå­åŸŸæ˜¯ä¸€ä¸ªç‰¹å®šçš„é¢†åŸŸçš„å­é›†ã€‚æ¯ä¸ªå­åŸŸéƒ½æœ‰è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å’Œè§„åˆ™ï¼Œå¯ä»¥ç‹¬ç«‹åœ°å¼€å‘å’Œç»´æŠ¤ã€‚</p>
<h3 id="å­åŸŸçš„åˆ†ç±»ï¼š"><a href="#å­åŸŸçš„åˆ†ç±»ï¼š" class="headerlink" title="å­åŸŸçš„åˆ†ç±»ï¼š"></a>å­åŸŸçš„åˆ†ç±»ï¼š</h3><ul>
<li><strong>æ ¸å¿ƒå­åŸŸï¼ˆCore Subdomainï¼‰</strong>ï¼šå¯¹ä¼ä¸šæœ€ä¸ºå…³é”®çš„é¢†åŸŸï¼Œå¾€å¾€æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</li>
<li><strong>æ”¯æŒå­åŸŸï¼ˆSupporting Subdomainï¼‰</strong>ï¼šä¸ºæ ¸å¿ƒå­åŸŸæä¾›æ”¯æŒçš„é¢†åŸŸã€‚</li>
<li><strong>é€šç”¨å­åŸŸï¼ˆGeneric Subdomainï¼‰</strong>ï¼šé€‚ç”¨äºå¤šä¸ªè¡Œä¸šæˆ–ä¼ä¸šçš„é€šç”¨é¢†åŸŸï¼Œå¾€å¾€å¯ä»¥ç”¨ç°æˆçš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ul>
<h2 id="1-3-æ¨¡å‹ï¼ˆModelï¼‰"><a href="#1-3-æ¨¡å‹ï¼ˆModelï¼‰" class="headerlink" title="1.3 æ¨¡å‹ï¼ˆModelï¼‰"></a>1.3 æ¨¡å‹ï¼ˆModelï¼‰</h2><p>æ¨¡å‹æ˜¯å¯¹ä¸šåŠ¡é¢†åŸŸçš„ç®€åŒ–å’ŒæŠ½è±¡ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…ç†è§£å’Œæè¿°é¢†åŸŸçš„æ¦‚å¿µã€ä¸šåŠ¡æµç¨‹å’Œè§„åˆ™ã€‚åœ¨DDDä¸­ï¼Œæ¨¡å‹ä¸ä»…ä»…æ˜¯æŠ€æœ¯ä¸Šçš„è®¾è®¡å›¾ï¼Œè¿˜æ˜¯å’Œé¢†åŸŸä¸“å®¶è®¨è®ºä¸šåŠ¡é€»è¾‘çš„å·¥å…·ã€‚</p>
<h3 id="æ¨¡å‹çš„ç‰¹ç‚¹ï¼š"><a href="#æ¨¡å‹çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="æ¨¡å‹çš„ç‰¹ç‚¹ï¼š"></a>æ¨¡å‹çš„ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>Ubiquitous Languageï¼ˆé€šç”¨è¯­è¨€ï¼‰</strong>ï¼šæ¨¡å‹ä¸­çš„æ‰€æœ‰æœ¯è¯­å’Œæ¦‚å¿µéƒ½åº”å½“ä¸é¢†åŸŸä¸“å®¶çš„è¯­è¨€ä¸€è‡´ï¼Œä»è€Œä¿ƒè¿›è·¨å­¦ç§‘çš„æ²Ÿé€šã€‚</li>
<li><strong>è¡¨è¾¾ä¸šåŠ¡</strong>ï¼šæ¨¡å‹çš„ç›®çš„æ˜¯è¡¨è¾¾ä¸šåŠ¡é¢†åŸŸä¸­çš„é‡è¦æ¦‚å¿µå’Œè¡Œä¸ºã€‚</li>
</ul>
<h2 id="1-4-èšåˆï¼ˆAggregateï¼‰"><a href="#1-4-èšåˆï¼ˆAggregateï¼‰" class="headerlink" title="1.4 èšåˆï¼ˆAggregateï¼‰"></a>1.4 èšåˆï¼ˆAggregateï¼‰</h2><p>èšåˆæ˜¯ä¸€ä¸ªç”±å¤šä¸ªå®ä½“å’Œå€¼å¯¹è±¡ç»„æˆçš„é›†åˆï¼Œå®ƒåœ¨ä¸€ä¸ªä¸šåŠ¡åœºæ™¯ä¸­è¡¨ç°ä¸ºä¸€ä¸ªå•å…ƒã€‚èšåˆçš„è®¾è®¡ç›®çš„æ˜¯ç¡®ä¿é¢†åŸŸæ¨¡å‹çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</p>
<h3 id="èšåˆçš„ç‰¹ç‚¹ï¼š"><a href="#èšåˆçš„ç‰¹ç‚¹ï¼š" class="headerlink" title="èšåˆçš„ç‰¹ç‚¹ï¼š"></a>èšåˆçš„ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>æ ¹å®ä½“ï¼ˆAggregate Rootï¼‰</strong>ï¼šèšåˆä¸­çš„ä¸€ä¸ªå®ä½“ï¼Œä½œä¸ºèšåˆçš„å…¥å£ç‚¹ã€‚æ‰€æœ‰å¤–éƒ¨è®¿é—®èšåˆçš„æ•°æ®å’Œæ“ä½œéƒ½å¿…é¡»é€šè¿‡æ ¹å®ä½“ã€‚</li>
<li><strong>ä¸€è‡´æ€§è¾¹ç•Œ</strong>ï¼šèšåˆå†…çš„å¯¹è±¡å¿…é¡»ä¿æŒä¸€è‡´æ€§ï¼Œèšåˆå¤–çš„å¯¹è±¡å¯ä»¥ç‹¬ç«‹åœ°å‘ç”Ÿå˜åŒ–ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String orderId;</span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderItem&gt; items;</span><br><span class="line">    <span class="keyword">private</span> String status;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> totalPrice;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(OrderItem item)</span> &#123;</span><br><span class="line">        items.add(item);</span><br><span class="line">        <span class="built_in">this</span>.totalPrice = calculateTotalPrice();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> <span class="title function_">calculateTotalPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.stream().mapToDouble(OrderItem::getTotalPrice).sum();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;æœªæ”¯ä»˜&quot;</span>.equals(status)) &#123;</span><br><span class="line">            status = <span class="string">&quot;å·²æ”¯ä»˜&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²æ”¯ä»˜æˆ–æ— æ•ˆ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> List&lt;OrderItem&gt; <span class="title function_">getItems</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTotalPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> totalPrice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>Order</code> èšåˆæ ¹è´Ÿè´£ç®¡ç†è®¢å•é¡¹ï¼ˆ<code>OrderItem</code>ï¼‰å’Œè®¢å•çš„çŠ¶æ€ã€‚</p>
<h2 id="1-5-å®ä½“ï¼ˆEntityï¼‰"><a href="#1-5-å®ä½“ï¼ˆEntityï¼‰" class="headerlink" title="1.5 å®ä½“ï¼ˆEntityï¼‰"></a>1.5 å®ä½“ï¼ˆEntityï¼‰</h2><p>å®ä½“æ˜¯æŒ‡åœ¨ä¸šåŠ¡ä¸­æœ‰æ ‡è¯†ç¬¦ä¸”ç”Ÿå‘½å‘¨æœŸå†…å¯èƒ½å‘ç”Ÿå˜åŒ–çš„å¯¹è±¡ã€‚å®ä½“é€šè¿‡å”¯ä¸€æ ‡è¯†ç¬¦æ¥åŒºåˆ†å…¶ä»–å®ä½“ã€‚</p>
<h3 id="å®ä½“çš„ç‰¹ç‚¹ï¼š"><a href="#å®ä½“çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="å®ä½“çš„ç‰¹ç‚¹ï¼š"></a>å®ä½“çš„ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>æ ‡è¯†ç¬¦</strong>ï¼šå®ä½“å¿…é¡»æœ‰å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆIDï¼‰ï¼Œå³ä½¿å®ä½“çš„å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œå®ƒä¾ç„¶ä¿æŒå”¯ä¸€æ€§ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå®ä½“é€šå¸¸æœ‰æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯èƒ½ä¼šè¢«åˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤ã€‚</li>
</ul>
<h2 id="1-6-å€¼å¯¹è±¡ï¼ˆValue-Objectï¼‰"><a href="#1-6-å€¼å¯¹è±¡ï¼ˆValue-Objectï¼‰" class="headerlink" title="1.6 å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰"></a>1.6 å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰</h2><p>å€¼å¯¹è±¡æ˜¯æ²¡æœ‰æ ‡è¯†ç¬¦ã€åªé€šè¿‡å±æ€§å®šä¹‰çš„å¯¹è±¡ã€‚åœ¨ä¸šåŠ¡ä¸­ï¼Œå®ƒé€šå¸¸ç”¨æ¥è¡¨ç¤ºæŸä¸ªä¸å¯å˜çš„æ¦‚å¿µã€‚</p>
<h3 id="å€¼å¯¹è±¡çš„ç‰¹ç‚¹ï¼š"><a href="#å€¼å¯¹è±¡çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="å€¼å¯¹è±¡çš„ç‰¹ç‚¹ï¼š"></a>å€¼å¯¹è±¡çš„ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>ä¸å¯å˜æ€§</strong>ï¼šä¸€æ—¦åˆ›å»ºï¼Œå€¼å¯¹è±¡çš„çŠ¶æ€å°±ä¸èƒ½æ”¹å˜ã€‚ä»»ä½•å˜åŒ–éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å€¼å¯¹è±¡ã€‚</li>
<li><strong>æ— æ ‡è¯†ç¬¦</strong>ï¼šå€¼å¯¹è±¡é€šè¿‡å…¶å±æ€§æ¥å”¯ä¸€æ ‡è¯†ï¼Œè€Œä¸æ˜¯é€šè¿‡IDã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Money</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> amount;</span><br><span class="line">    <span class="keyword">private</span> String currency;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸å¯å˜çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> Money <span class="title function_">add</span><span class="params">(Money other)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">this</span>.currency.equals(other.currency)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Currency mismatch&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Money</span>(<span class="built_in">this</span>.amount + other.amount, <span class="built_in">this</span>.currency);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>Money</code> æ˜¯ä¸€ä¸ªå€¼å¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºé‡‘é¢çš„æ¦‚å¿µï¼Œå¯ä»¥ç”¨äºè®¢å•ä»·æ ¼çš„è®¡ç®—ã€‚</p>
<h2 id="1-7-é¢†åŸŸæœåŠ¡ï¼ˆDomain-Serviceï¼‰"><a href="#1-7-é¢†åŸŸæœåŠ¡ï¼ˆDomain-Serviceï¼‰" class="headerlink" title="1.7 é¢†åŸŸæœåŠ¡ï¼ˆDomain Serviceï¼‰"></a>1.7 é¢†åŸŸæœåŠ¡ï¼ˆDomain Serviceï¼‰</h2><p>é¢†åŸŸæœåŠ¡æ˜¯æŒ‡æ‰§è¡Œä¸€äº›ä¸å±äºä»»ä½•ä¸€ä¸ªå®ä½“æˆ–å€¼å¯¹è±¡çš„æ“ä½œçš„æœåŠ¡ã€‚é¢†åŸŸæœåŠ¡é€šå¸¸ç”¨äºå¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œæˆ–è€…æä¾›è·¨å¤šä¸ªèšåˆçš„æ“ä½œã€‚</p>
<h3 id="é¢†åŸŸæœåŠ¡çš„ç‰¹ç‚¹ï¼š"><a href="#é¢†åŸŸæœåŠ¡çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="é¢†åŸŸæœåŠ¡çš„ç‰¹ç‚¹ï¼š"></a>é¢†åŸŸæœåŠ¡çš„ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>æ— çŠ¶æ€</strong>ï¼šé¢†åŸŸæœåŠ¡é€šå¸¸æ²¡æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œå®ƒä»¬é€šè¿‡è¾“å…¥å’Œè¾“å‡ºä¸é¢†åŸŸæ¨¡å‹è¿›è¡Œäº¤äº’ã€‚</li>
<li><strong>ä¸šåŠ¡é€»è¾‘é›†ä¸­</strong>ï¼šé¢†åŸŸæœåŠ¡è´Ÿè´£å°è£…è·¨å¤šä¸ªèšåˆçš„å¤æ‚ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¢å•æœåŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> OrderRepository orderRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OrderService</span><span class="params">(OrderRepository orderRepository)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.orderRepository = orderRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Order <span class="title function_">createOrder</span><span class="params">(String orderId, List&lt;OrderItem&gt; items)</span> &#123;</span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Order</span>(orderId);</span><br><span class="line">        items.forEach(order::addItem);</span><br><span class="line">        orderRepository.save(order);</span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">payOrder</span><span class="params">(String orderId)</span> &#123;</span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> orderRepository.findById(orderId);</span><br><span class="line">        order.pay();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>OrderService</code> æä¾›äº†ä¸šåŠ¡é€»è¾‘ï¼Œä¾‹å¦‚åˆ›å»ºè®¢å•å’Œæ”¯ä»˜è®¢å•ã€‚</p>
<h2 id="1-8-ä»“å‚¨ï¼ˆRepositoryï¼‰"><a href="#1-8-ä»“å‚¨ï¼ˆRepositoryï¼‰" class="headerlink" title="1.8 ä»“å‚¨ï¼ˆRepositoryï¼‰"></a>1.8 ä»“å‚¨ï¼ˆRepositoryï¼‰</h2><p>ä»“å‚¨æ˜¯ç”¨äºæŒä¹…åŒ–å’Œæ£€ç´¢é¢†åŸŸæ¨¡å‹ï¼ˆå¦‚èšåˆæ ¹ï¼‰çš„æœºåˆ¶ã€‚å®ƒå°†é¢†åŸŸæ¨¡å‹ä¸æ•°æ®å­˜å‚¨ä¹‹é—´çš„æ˜ å°„æŠ½è±¡åŒ–ï¼Œæä¾›ä¸€ä¸ªæ¸…æ™°çš„æ¥å£æ¥è®¿é—®é¢†åŸŸå¯¹è±¡ã€‚</p>
<h3 id="ä»“å‚¨çš„ç‰¹ç‚¹ï¼š"><a href="#ä»“å‚¨çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="ä»“å‚¨çš„ç‰¹ç‚¹ï¼š"></a>ä»“å‚¨çš„ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>èšç„¦èšåˆæ ¹</strong>ï¼šä»“å‚¨é€šå¸¸æ“ä½œèšåˆæ ¹ï¼Œå…¶ä»–å¯¹è±¡é€šå¸¸ä¸ç›´æ¥å­˜å‚¨æˆ–è®¿é—®ã€‚</li>
<li><strong>æŒä¹…åŒ–æ“ä½œ</strong>ï¼šä»“å‚¨é€šè¿‡æŒä¹…åŒ–æŠ€æœ¯æ¥å­˜å‚¨å’Œæ£€ç´¢é¢†åŸŸå¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¢å•ä»“å‚¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderRepository</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Order order)</span>;</span><br><span class="line">    Order <span class="title function_">findById</span><span class="params">(String orderId)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InMemoryOrderRepository</span> <span class="keyword">implements</span> <span class="title class_">OrderRepository</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Order&gt; orderDatabase = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Order order)</span> &#123;</span><br><span class="line">        orderDatabase.put(order.getOrderId(), order);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Order <span class="title function_">findById</span><span class="params">(String orderId)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> orderDatabase.get(orderId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>InMemoryOrderRepository</code> å®ç°äº† <code>OrderRepository</code> æ¥å£ï¼Œé€šè¿‡å†…å­˜ä¸­çš„ <code>Map</code> æ¥å­˜å‚¨å’ŒæŸ¥æ‰¾è®¢å•ã€‚</p>
<h2 id="1-9-é¢†åŸŸäº‹ä»¶ï¼ˆDomain-Eventï¼‰"><a href="#1-9-é¢†åŸŸäº‹ä»¶ï¼ˆDomain-Eventï¼‰" class="headerlink" title="1.9 é¢†åŸŸäº‹ä»¶ï¼ˆDomain Eventï¼‰"></a>1.9 é¢†åŸŸäº‹ä»¶ï¼ˆDomain Eventï¼‰</h2><p>é¢†åŸŸäº‹ä»¶æ˜¯æŒ‡åœ¨é¢†åŸŸæ¨¡å‹ä¸­å‘ç”Ÿçš„ã€å¯¹å…¶ä»–éƒ¨åˆ†æœ‰æ„ä¹‰çš„äº‹ä»¶ã€‚å®ƒé€šå¸¸è¡¨ç¤ºä¸šåŠ¡çŠ¶æ€çš„æ”¹å˜ã€‚</p>
<h3 id="é¢†åŸŸäº‹ä»¶çš„ç‰¹ç‚¹ï¼š"><a href="#é¢†åŸŸäº‹ä»¶çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="é¢†åŸŸäº‹ä»¶çš„ç‰¹ç‚¹ï¼š"></a>é¢†åŸŸäº‹ä»¶çš„ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>ä¸šåŠ¡äº‹ä»¶</strong>ï¼šé¢†åŸŸäº‹ä»¶æè¿°äº†ä¸šåŠ¡å‘ç”Ÿçš„æŸä¸ªé‡è¦äº‹ä»¶ï¼Œæ¯”å¦‚è®¢å•åˆ›å»ºã€æ”¯ä»˜å®Œæˆç­‰ã€‚</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šé¢†åŸŸäº‹ä»¶å¯ä»¥è¢«å…¶ä»–ç³»ç»Ÿæˆ–ç»„ä»¶å¼‚æ­¥å¤„ç†ï¼Œé€šå¸¸ä¸äº‹ä»¶é©±åŠ¨æ¶æ„ç»“åˆä½¿ç”¨ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¢å•æ”¯ä»˜äº‹ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderPaidEvent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String orderId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OrderPaidEvent</span><span class="params">(String orderId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.orderId = orderId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getOrderId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> orderId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>OrderPaidEvent</code> è¡¨ç¤ºä¸€ä¸ªè®¢å•æ”¯ä»˜æˆåŠŸçš„äº‹ä»¶ï¼Œå¯ä»¥é€šè¿‡äº‹ä»¶å‘å¸ƒæœºåˆ¶è¿›è¡Œé€šçŸ¥ã€‚</p>
<h2 id="1-10-é˜²è…å±‚ï¼ˆAnticorruption-Layerï¼‰"><a href="#1-10-é˜²è…å±‚ï¼ˆAnticorruption-Layerï¼‰" class="headerlink" title="1.10 é˜²è…å±‚ï¼ˆAnticorruption Layerï¼‰"></a>1.10 é˜²è…å±‚ï¼ˆAnticorruption Layerï¼‰</h2><p>é˜²è…å±‚æ˜¯ä¸€ç§æ¨¡å¼ï¼Œç”¨æ¥ä¿æŠ¤é¢†åŸŸæ¨¡å‹å…å—å¤–éƒ¨ç³»ç»Ÿï¼ˆå¦‚é—ç•™ç³»ç»Ÿæˆ–ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼‰å½±å“ã€‚é€šè¿‡é˜²è…å±‚ï¼Œå¤–éƒ¨ç³»ç»Ÿçš„å˜åŒ–ä¸ä¼šç›´æ¥å½±å“åˆ°ç³»ç»Ÿå†…éƒ¨çš„æ ¸å¿ƒé¢†åŸŸæ¨¡å‹ã€‚</p>
<h3 id="é˜²è…å±‚çš„ç‰¹ç‚¹ï¼š"><a href="#é˜²è…å±‚çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="é˜²è…å±‚çš„ç‰¹ç‚¹ï¼š"></a>é˜²è…å±‚çš„ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>æ¥å£é€‚é…</strong>ï¼šé˜²è…å±‚å°†å¤–éƒ¨ç³»ç»Ÿçš„æ¥å£è½¬æ¢æˆé¢†åŸŸæ¨¡å‹èƒ½å¤Ÿç†è§£çš„æ ¼å¼ã€‚</li>
<li><strong>æ•°æ®è½¬æ¢</strong>ï¼šé˜²è…å±‚è´Ÿè´£å°†å¤–éƒ¨ç³»ç»Ÿçš„æ•°æ®è½¬æ¢æˆé¢†åŸŸæ¨¡å‹æ‰€éœ€çš„æ ¼å¼ï¼Œé¿å…å¤–éƒ¨ç³»ç»Ÿå¯¹é¢†åŸŸæ¨¡å‹çš„ç›´æ¥å½±å“ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹å¤–æä¾›æ”¯ä»˜åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExternalPaymentSystem</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">processPayment</span><span class="params">(String orderId, <span class="type">double</span> amount)</span> &#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ”¯ä»˜å¤„ç†</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Processing payment for Order ID: &quot;</span> + orderId);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PaymentAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ExternalPaymentSystem externalPaymentSystem;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PaymentAdapter</span><span class="params">(ExternalPaymentSystem externalPaymentSystem)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.externalPaymentSystem = externalPaymentSystem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">makePayment</span><span class="params">(String orderId, <span class="type">double</span> amount)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> externalPaymentSystem.processPayment(orderId, amount);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>PaymentAdapter</code> æ˜¯é˜²è…å±‚ï¼Œå®ƒå°†å¤–éƒ¨æ”¯ä»˜ç³»ç»Ÿçš„æ¥å£è½¬æ¢ä¸ºæˆ‘ä»¬ç³»ç»Ÿå¯ä»¥ç†è§£å’Œä½¿ç”¨çš„æ–¹å¼ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>é¢†åŸŸ</strong>ï¼šè®¢å•ã€å•†å“ã€æ”¯ä»˜ç­‰ã€‚</p>
<p><strong>èšåˆ</strong>ï¼šè®¢å•æ˜¯èšåˆæ ¹ï¼Œç®¡ç†å•†å“é¡¹ã€‚</p>
<p><strong>å®ä½“</strong>ï¼šè®¢å•å’Œè®¢å•é¡¹æ˜¯å®ä½“ï¼Œé€šè¿‡å”¯ä¸€æ ‡è¯†ç¬¦æ¥åŒºåˆ†ã€‚</p>
<p><strong>å€¼å¯¹è±¡</strong>ï¼šé‡‘é¢ï¼ˆMoneyï¼‰æ˜¯ä¸å¯å˜çš„å€¼å¯¹è±¡ã€‚</p>
<p><strong>é¢†åŸŸæœåŠ¡</strong>ï¼šå¦‚è®¢å•æœåŠ¡ï¼ˆOrderServiceï¼‰ï¼Œå°è£…ä¸šåŠ¡é€»è¾‘ã€‚</p>
<p><strong>ä»“å‚¨</strong>ï¼šå¦‚è®¢å•ä»“å‚¨ï¼ˆOrderRepositoryï¼‰ï¼Œç”¨äºæŒä¹…åŒ–ã€‚</p>
<p><strong>é¢†åŸŸäº‹ä»¶</strong>ï¼šå¦‚è®¢å•æ”¯ä»˜äº‹ä»¶ã€‚</p>
<p><strong>é˜²è…å±‚</strong>ï¼šç”¨äºéš”ç¦»å¤–éƒ¨ç³»ç»Ÿã€‚</p>
<h1 id="2-DDD-è®¾è®¡åŸåˆ™"><a href="#2-DDD-è®¾è®¡åŸåˆ™" class="headerlink" title="2. DDD è®¾è®¡åŸåˆ™"></a>2. DDD è®¾è®¡åŸåˆ™</h1><h2 id="2-1-é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ ¸å¿ƒæ˜¯èšç„¦ä¸šåŠ¡"><a href="#2-1-é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ ¸å¿ƒæ˜¯èšç„¦ä¸šåŠ¡" class="headerlink" title="2.1 é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ ¸å¿ƒæ˜¯èšç„¦ä¸šåŠ¡"></a>2.1 é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ ¸å¿ƒæ˜¯<strong>èšç„¦ä¸šåŠ¡</strong></h2><p>DDD çš„è®¾è®¡åŸåˆ™ä¹‹ä¸€å°±æ˜¯è¦èšç„¦ä¸šåŠ¡ï¼Œç†è§£é¢†åŸŸå’Œä¸šåŠ¡éœ€æ±‚ã€‚åœ¨ç³»ç»Ÿè®¾è®¡æ—¶ï¼Œè¦å§‹ç»ˆå°†å…³æ³¨ç‚¹æ”¾åœ¨ä¸šåŠ¡ä¸Šï¼Œç¡®ä¿ç³»ç»Ÿèƒ½å¤Ÿè¡¨è¾¾å’Œè§£å†³å®é™…çš„ä¸šåŠ¡é—®é¢˜ã€‚</p>
<h3 id="ç¤ºä¾‹ï¼šä¸šåŠ¡é©±åŠ¨è®¾è®¡"><a href="#ç¤ºä¾‹ï¼šä¸šåŠ¡é©±åŠ¨è®¾è®¡" class="headerlink" title="ç¤ºä¾‹ï¼šä¸šåŠ¡é©±åŠ¨è®¾è®¡"></a>ç¤ºä¾‹ï¼šä¸šåŠ¡é©±åŠ¨è®¾è®¡</h3><p>å‡è®¾æˆ‘ä»¬æ­£åœ¨è®¾è®¡ä¸€ä¸ªç”µå•†ç³»ç»Ÿä¸­çš„è®¢å•æœåŠ¡ã€‚åœ¨è¿™ä¸ªæœåŠ¡ä¸­ï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒå…³æ³¨ç‚¹å°±æ˜¯â€œå¦‚ä½•ç®¡ç†è®¢å•â€ã€‚æˆ‘ä»¬é€šè¿‡èšç„¦ä¸šåŠ¡ï¼Œåˆ›å»ºäº†è®¢å•ï¼ˆOrderï¼‰è¿™ä¸€æ ¸å¿ƒèšåˆå¯¹è±¡ã€‚è®¢å•èšåˆåŒ…å«å¤šä¸ªè®¢å•é¡¹ï¼ˆOrderItemï¼‰ï¼Œæ¯ä¸ªè®¢å•é¡¹åŒ…å«ä¸€ä¸ªå•†å“ï¼ˆProductï¼‰ã€‚è¿™äº›é¢†åŸŸå¯¹è±¡å’Œä¸šåŠ¡è¡Œä¸ºå…±åŒå¸®åŠ©æˆ‘ä»¬å®ç°ç”µå•†å¹³å°çš„è®¢å•ç®¡ç†åŠŸèƒ½ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String orderId;</span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderItem&gt; items;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> totalPrice;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(OrderItem item)</span> &#123;</span><br><span class="line">        items.add(item);</span><br><span class="line">        <span class="built_in">this</span>.totalPrice = calculateTotalPrice();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> <span class="title function_">calculateTotalPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items.stream().mapToDouble(OrderItem::getTotalPrice).sum();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTotalPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> totalPrice;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œ<code>Order</code> è¿™ä¸ªèšåˆæ ¹å…³æ³¨çš„å°±æ˜¯å¦‚ä½•ç®¡ç†å•†å“é¡¹å’Œè®¡ç®—è®¢å•æ€»ä»·ã€‚ä¸šåŠ¡éœ€æ±‚æ˜¯æˆ‘ä»¬èšç„¦çš„æ ¸å¿ƒã€‚</p>
<h2 id="2-2-èšåˆè®¾è®¡åŸåˆ™ï¼šç¡®ä¿ä¸€è‡´æ€§å’Œå°è£…"><a href="#2-2-èšåˆè®¾è®¡åŸåˆ™ï¼šç¡®ä¿ä¸€è‡´æ€§å’Œå°è£…" class="headerlink" title="2.2 èšåˆè®¾è®¡åŸåˆ™ï¼šç¡®ä¿ä¸€è‡´æ€§å’Œå°è£…"></a>2.2 <strong>èšåˆè®¾è®¡åŸåˆ™ï¼šç¡®ä¿ä¸€è‡´æ€§å’Œå°è£…</strong></h2><p>èšåˆæ˜¯ DDD ä¸­çš„é‡è¦æ¦‚å¿µï¼Œå®ƒä»£è¡¨äº†ä¸€ç»„é¢†åŸŸå¯¹è±¡ï¼Œå®ƒä»¬å¿…é¡»é€šè¿‡èšåˆæ ¹æ¥è®¿é—®ã€‚èšåˆçš„è®¾è®¡è¦ç¡®ä¿ä¸€è‡´æ€§ï¼Œå³åœ¨åŒä¸€ä¸ªèšåˆå†…è¿›è¡Œçš„æ“ä½œåº”è¯¥æ˜¯åŸå­æ€§çš„ã€‚èšåˆçš„å°è£…æ€§ä¹Ÿéå¸¸é‡è¦ï¼Œèšåˆå¤–çš„ä»£ç ä¸èƒ½ç›´æ¥ä¿®æ”¹èšåˆå†…éƒ¨çš„çŠ¶æ€ã€‚</p>
<h3 id="ç¤ºä¾‹ï¼šè®¢å•èšåˆçš„è®¾è®¡"><a href="#ç¤ºä¾‹ï¼šè®¢å•èšåˆçš„è®¾è®¡" class="headerlink" title="ç¤ºä¾‹ï¼šè®¢å•èšåˆçš„è®¾è®¡"></a>ç¤ºä¾‹ï¼šè®¢å•èšåˆçš„è®¾è®¡</h3><p>æˆ‘ä»¬ç»§ç»­ä½¿ç”¨è®¢å•ä¾‹å­æ¥è§£é‡Šèšåˆè®¾è®¡ã€‚<code>Order</code> æ˜¯ä¸€ä¸ªèšåˆæ ¹ï¼Œå®ƒç®¡ç† <code>OrderItem</code> çš„é›†åˆã€‚å¤–éƒ¨æ— æ³•ç›´æ¥ä¿®æ”¹ <code>OrderItem</code>ï¼Œåªèƒ½é€šè¿‡ <code>Order</code> èšåˆæ ¹æä¾›çš„æ¥å£è¿›è¡Œæ“ä½œã€‚è¿™ä¿è¯äº†èšåˆå†…çš„ä¸€è‡´æ€§å’Œå°è£…æ€§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String orderId;</span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderItem&gt; items;</span><br><span class="line">    <span class="keyword">private</span> String status;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èšåˆæ ¹æ–¹æ³•ï¼Œä¸èƒ½ç›´æ¥æ“ä½œ OrderItem</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(OrderItem item)</span> &#123;</span><br><span class="line">        items.add(item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;æœªæ”¯ä»˜&quot;</span>.equals(status)) &#123;</span><br><span class="line">            status = <span class="string">&quot;å·²æ”¯ä»˜&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;è®¢å•å·²æ”¯ä»˜&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;OrderItem&gt; <span class="title function_">getItems</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> items;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œï¼Œ<code>Order</code> æ˜¯èšåˆæ ¹ï¼Œå®ƒå°è£…äº†æ‰€æœ‰ä¸è®¢å•ç›¸å…³çš„æ“ä½œã€‚å¤–éƒ¨ä¸èƒ½ç›´æ¥æ“ä½œ <code>OrderItem</code>ï¼Œåªèƒ½é€šè¿‡ <code>Order</code> æ¥æ·»åŠ å•†å“é¡¹ï¼Œæ”¯ä»˜è®¢å•ç­‰ã€‚è¿™ç¡®ä¿äº†èšåˆå†…çš„ä¸€è‡´æ€§ã€‚</p>
<h2 id="2-3-é™ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded-Contextï¼‰åŸåˆ™"><a href="#2-3-é™ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded-Contextï¼‰åŸåˆ™" class="headerlink" title="2.3 é™ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded Contextï¼‰åŸåˆ™"></a>2.3 <strong>é™ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded Contextï¼‰åŸåˆ™</strong></h2><p>é™ç•Œä¸Šä¸‹æ–‡æ˜¯ DDD ä¸­çš„å…³é”®æ¦‚å¿µï¼Œå®ƒå®šä¹‰äº†ç³»ç»Ÿä¸­ä¸åŒéƒ¨åˆ†çš„è¾¹ç•Œå’Œä¸šåŠ¡æ¨¡å‹ã€‚æ¯ä¸ªé™ç•Œä¸Šä¸‹æ–‡éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸šåŠ¡æ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹ä¹‹é—´çš„äº¤äº’é€šè¿‡æ˜ç¡®å®šä¹‰çš„æ¥å£è¿›è¡Œã€‚é™ç•Œä¸Šä¸‹æ–‡åŸåˆ™å¼ºè°ƒä¸åŒæ¨¡å—ä¹‹é—´çš„éš”ç¦»å’Œè§£è€¦ã€‚</p>
<h3 id="ç¤ºä¾‹ï¼šé™ç•Œä¸Šä¸‹æ–‡"><a href="#ç¤ºä¾‹ï¼šé™ç•Œä¸Šä¸‹æ–‡" class="headerlink" title="ç¤ºä¾‹ï¼šé™ç•Œä¸Šä¸‹æ–‡"></a>ç¤ºä¾‹ï¼šé™ç•Œä¸Šä¸‹æ–‡</h3><p>åœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼Œè®¢å•æ¨¡å—ã€æ”¯ä»˜æ¨¡å—å’Œåº“å­˜æ¨¡å—å¯èƒ½æ˜¯ä¸åŒçš„é™ç•Œä¸Šä¸‹æ–‡ã€‚æ¯ä¸ªé™ç•Œä¸Šä¸‹æ–‡æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸”å®ƒä»¬ä¹‹é—´çš„äº¤äº’è¦é€šè¿‡æ¥å£æˆ–äº‹ä»¶æ¥å®Œæˆã€‚ä¾‹å¦‚ï¼Œæ”¯ä»˜æ¨¡å—ä¸ç›´æ¥æ“ä½œè®¢å•æ¨¡å—çš„æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡å‘é€æ”¯ä»˜æˆåŠŸäº‹ä»¶æˆ–è°ƒç”¨è®¢å•æ¨¡å—æä¾›çš„æ¥å£æ¥æ›´æ–°è®¢å•çŠ¶æ€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ”¯ä»˜æ¨¡å—ä¸­çš„æ”¯ä»˜æˆåŠŸäº‹ä»¶</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PaymentSucceededEvent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String orderId;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PaymentSucceededEvent</span><span class="params">(String orderId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.orderId = orderId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getOrderId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> orderId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢å•æ¨¡å—å¤„ç†æ”¯ä»˜æˆåŠŸäº‹ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handlePaymentSucceeded</span><span class="params">(PaymentSucceededEvent event)</span> &#123;</span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> orderRepository.findById(event.getOrderId());</span><br><span class="line">        order.pay();</span><br><span class="line">        orderRepository.save(order);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œï¼Œ<code>PaymentSucceededEvent</code> è¡¨ç¤ºæ”¯ä»˜æˆåŠŸçš„äº‹ä»¶ï¼Œè®¢å•æ¨¡å—é€šè¿‡è®¢é˜…è¿™ä¸ªäº‹ä»¶æ¥æ›´æ–°è®¢å•çŠ¶æ€ã€‚ä¸åŒçš„é™ç•Œä¸Šä¸‹æ–‡é€šè¿‡äº‹ä»¶è§£è€¦ï¼Œç¡®ä¿äº†ç³»ç»Ÿçš„æ¨¡å—åŒ–å’Œé«˜å†…èšä½è€¦åˆã€‚</p>
<h2 id="2-4-é¢†åŸŸäº‹ä»¶ï¼ˆDomain-Eventsï¼‰è®¾è®¡åŸåˆ™"><a href="#2-4-é¢†åŸŸäº‹ä»¶ï¼ˆDomain-Eventsï¼‰è®¾è®¡åŸåˆ™" class="headerlink" title="2.4 é¢†åŸŸäº‹ä»¶ï¼ˆDomain Eventsï¼‰è®¾è®¡åŸåˆ™"></a>2.4 <strong>é¢†åŸŸäº‹ä»¶ï¼ˆDomain Eventsï¼‰è®¾è®¡åŸåˆ™</strong></h2><p>é¢†åŸŸäº‹ä»¶ç”¨äºè¡¨ç¤ºä¸€ä¸ªé‡è¦çš„ä¸šåŠ¡äº‹ä»¶ï¼Œå®ƒåœ¨ä¸šåŠ¡é¢†åŸŸå†…ä¼ æ’­ï¼Œå¯èƒ½ä¼šè§¦å‘å…¶ä»–ä¸šåŠ¡æ“ä½œã€‚é¢†åŸŸäº‹ä»¶è®¾è®¡åŸåˆ™å¼ºè°ƒäº†äº‹ä»¶é©±åŠ¨æ¨¡å‹çš„ä½¿ç”¨ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬è§£è€¦ä¸åŒæ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ çµæ´»å’Œæ‰©å±•æ€§æ›´å¼ºã€‚</p>
<h3 id="ç¤ºä¾‹ï¼šé¢†åŸŸäº‹ä»¶"><a href="#ç¤ºä¾‹ï¼šé¢†åŸŸäº‹ä»¶" class="headerlink" title="ç¤ºä¾‹ï¼šé¢†åŸŸäº‹ä»¶"></a>ç¤ºä¾‹ï¼šé¢†åŸŸäº‹ä»¶</h3><p>ç»§ç»­ç”¨è®¢å•ç³»ç»Ÿæ¥æ¼”ç¤ºé¢†åŸŸäº‹ä»¶ã€‚å‡è®¾åœ¨æ”¯ä»˜æˆåŠŸåï¼Œæˆ‘ä»¬éœ€è¦é€šçŸ¥åº“å­˜ç³»ç»Ÿå‡å°‘åº“å­˜æ•°é‡ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¢†åŸŸäº‹ä»¶æ¥å®Œæˆã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¢å•æ”¯ä»˜æˆåŠŸé¢†åŸŸäº‹ä»¶</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderPaidEvent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String orderId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OrderPaidEvent</span><span class="params">(String orderId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.orderId = orderId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getOrderId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> orderId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¢†åŸŸäº‹ä»¶å¤„ç†å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InventoryService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleOrderPaid</span><span class="params">(OrderPaidEvent event)</span> &#123;</span><br><span class="line">        <span class="comment">// åœ¨æ”¯ä»˜æˆåŠŸåï¼Œæ›´æ–°åº“å­˜</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Order &quot;</span> + event.getOrderId() + <span class="string">&quot; paid. Reducing inventory.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>OrderPaidEvent</code> è¡¨ç¤ºè®¢å•æ”¯ä»˜æˆåŠŸçš„äº‹ä»¶ï¼Œ<code>InventoryService</code> å¤„ç†è¿™ä¸ªäº‹ä»¶æ¥å‡å°‘åº“å­˜ã€‚é€šè¿‡é¢†åŸŸäº‹ä»¶çš„è®¾è®¡ï¼Œæ”¯ä»˜å’Œåº“å­˜æ“ä½œè§£è€¦ï¼Œç³»ç»Ÿæ›´åŠ çµæ´»ã€‚</p>
<h2 id="2-5-é˜²è…å±‚ï¼ˆAnticorruption-Layerï¼‰åŸåˆ™"><a href="#2-5-é˜²è…å±‚ï¼ˆAnticorruption-Layerï¼‰åŸåˆ™" class="headerlink" title="2.5 é˜²è…å±‚ï¼ˆAnticorruption Layerï¼‰åŸåˆ™"></a>2.5 <strong>é˜²è…å±‚ï¼ˆAnticorruption Layerï¼‰åŸåˆ™</strong></h2><p>é˜²è…å±‚ç”¨äºä¿æŠ¤æˆ‘ä»¬é¢†åŸŸæ¨¡å‹ä¸å—å¤–éƒ¨ç³»ç»Ÿå˜åŒ–çš„å½±å“ã€‚å®ƒå……å½“äº†é¢†åŸŸæ¨¡å‹å’Œå¤–éƒ¨ç³»ç»Ÿä¹‹é—´çš„éš”ç¦»å±‚ï¼Œé˜²æ­¢å¤–éƒ¨ç³»ç»Ÿçš„å˜åŒ–ç›´æ¥å½±å“æˆ‘ä»¬çš„é¢†åŸŸæ¨¡å‹ã€‚</p>
<h3 id="ç¤ºä¾‹ï¼šé˜²è…å±‚"><a href="#ç¤ºä¾‹ï¼šé˜²è…å±‚" class="headerlink" title="ç¤ºä¾‹ï¼šé˜²è…å±‚"></a>ç¤ºä¾‹ï¼šé˜²è…å±‚</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤–éƒ¨æ”¯ä»˜ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é˜²è…å±‚æ¥é€‚é…å¤–éƒ¨æ”¯ä»˜ç³»ç»Ÿçš„æ¥å£ï¼Œä½¿å…¶ä¸æˆ‘ä»¬çš„é¢†åŸŸæ¨¡å‹å…¼å®¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤–éƒ¨æ”¯ä»˜ç³»ç»Ÿ</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExternalPaymentSystem</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">processPayment</span><span class="params">(String orderId, <span class="type">double</span> amount)</span> &#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ”¯ä»˜å¤„ç†</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Processing payment for Order ID: &quot;</span> + orderId);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é˜²è…å±‚ï¼Œé€‚é…å¤–éƒ¨æ”¯ä»˜ç³»ç»Ÿ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PaymentAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ExternalPaymentSystem externalPaymentSystem;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PaymentAdapter</span><span class="params">(ExternalPaymentSystem externalPaymentSystem)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.externalPaymentSystem = externalPaymentSystem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">makePayment</span><span class="params">(String orderId, <span class="type">double</span> amount)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> externalPaymentSystem.processPayment(orderId, amount);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>PaymentAdapter</code> æ˜¯é˜²è…å±‚ï¼Œå®ƒå°†å¤–éƒ¨æ”¯ä»˜ç³»ç»Ÿçš„æ¥å£é€‚é…åˆ°æˆ‘ä»¬ç³»ç»Ÿå¯ä»¥ç†è§£å’Œä½¿ç”¨çš„æ–¹å¼ã€‚è¿™ä¿è¯äº†å¤–éƒ¨ç³»ç»Ÿçš„å˜åŒ–ä¸ä¼šç›´æ¥å½±å“æˆ‘ä»¬çš„é¢†åŸŸæ¨¡å‹ã€‚</p>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>DDD è®¾è®¡åŸåˆ™ä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä½•ç»„ç»‡å’Œç®¡ç†å¤æ‚ä¸šåŠ¡çš„æ¡†æ¶ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é¢å¯¹å˜åŒ–æ—¶ä»èƒ½ä¿æŒçµæ´»æ€§å’Œæ‰©å±•æ€§ã€‚é€šè¿‡ä»¥ä¸‹åŸåˆ™ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ„å»ºå‡ºæ›´å…·é«˜å†…èšä½è€¦åˆçš„ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>èšç„¦ä¸šåŠ¡</strong>ï¼šå§‹ç»ˆå…³æ³¨ä¸šåŠ¡éœ€æ±‚ï¼Œè®¾è®¡ç¬¦åˆä¸šåŠ¡çš„æ¨¡å‹ã€‚</li>
<li><strong>èšåˆè®¾è®¡åŸåˆ™</strong>ï¼šç¡®ä¿èšåˆå†…çš„ä¸€è‡´æ€§å’Œå°è£…æ€§ã€‚</li>
<li><strong>é™ç•Œä¸Šä¸‹æ–‡</strong>ï¼šæ˜ç¡®ç³»ç»Ÿçš„ä¸åŒæ¨¡å—å’Œè¾¹ç•Œï¼Œé¿å…è·¨æ¨¡å—çš„ä¸šåŠ¡é€»è¾‘æ··ä¹±ã€‚</li>
<li><strong>é¢†åŸŸäº‹ä»¶</strong>ï¼šä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹è§£è€¦ç³»ç»Ÿæ¨¡å—ï¼Œæé«˜æ‰©å±•æ€§ã€‚</li>
<li><strong>é˜²è…å±‚</strong>ï¼šä¿æŠ¤é¢†åŸŸæ¨¡å‹ä¸å—å¤–éƒ¨ç³»ç»Ÿå˜åŒ–çš„å½±å“ã€‚</li>
</ul>
<p>è¿™äº›è®¾è®¡åŸåˆ™å°†å¸®åŠ©æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¿æŒä¸šåŠ¡ä¸æŠ€æœ¯çš„é«˜åº¦ä¸€è‡´ï¼Œè®©ç³»ç»Ÿéšç€ä¸šåŠ¡éœ€æ±‚çš„å˜åŒ–èƒ½å¤Ÿçµæ´»æ‰©å±•ã€‚</p>
<h1 id="3-å®ç°-DDD-çš„æ¶æ„"><a href="#3-å®ç°-DDD-çš„æ¶æ„" class="headerlink" title="3. å®ç° DDD çš„æ¶æ„"></a>3. å®ç° DDD çš„æ¶æ„</h1><h1 id="4-æ ¸å¿ƒ-DDD-æ¨¡å¼"><a href="#4-æ ¸å¿ƒ-DDD-æ¨¡å¼" class="headerlink" title="4. æ ¸å¿ƒ DDD æ¨¡å¼"></a>4. æ ¸å¿ƒ DDD æ¨¡å¼</h1></div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-01-01</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« Ethan</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%EF%BC%88DDD%EF%BC%89/'>
                            é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%B3%95%E8%AE%BA/'>
                            è®¾è®¡æ–¹æ³•è®º
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                

                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â© 1949-2025 China 

            
                

            
                
                    / <a href="/contact/"> è”ç³» </a>
                

            
                
                    / <a href="/support/"> æ”¯æŒ </a>
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>âœ¨&#34;The only way to achieve the impossible is to believe it is possible.&#34; âœ¨</span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>